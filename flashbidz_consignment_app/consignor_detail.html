{% extends "base.html" %}
{% block content %}

<p style="margin-top: 8px;">
  <a class="btn" href="{{ url_for('items_list', consignor_id=consignor.id) }}">
    View all items for this consignor
  </a>
</p>

<h2>{{ consignor.name }}</h2>
<div style="display: flex; gap: 20px; margin: 20px 0;">
    
    <div style="background: #000; padding: 15px 20px; color:white; border-left: 6px solid #e60000; flex:1; border-radius: 6px;">
        <div style="font-size:14px; opacity:.8;">Total Items</div>
        <div style="font-size:26px; font-weight:bold;">{{ stats.total_items }}</div>
    </div>

    <div style="background: #000; padding: 15px 20px; color:white; border-left: 6px solid #e60000; flex:1; border-radius: 6px;">
        <div style="font-size:14px; opacity:.8;">Sold Items</div>
        <div style="font-size:26px; font-weight:bold;">{{ stats.sold_items }}</div>
    </div>

    <div style="background: #000; padding: 15px 20px; color:white; border-left: 6px solid #e60000; flex:1; border-radius: 6px;">
        <div style="font-size:14px; opacity:.8;">Total Sales</div>
        <div style="font-size:26px; font-weight:bold;">${{ stats.total_sales }}</div>
    </div>

    <div style="background: #000; padding: 15px 20px; color:white; border-left: 6px solid #e60000; flex:1; border-radius: 6px;">
        <div style="font-size:14px; opacity:.8;">Total Payouts</div>
        <div style="font-size:26px; font-weight:bold;">${{ stats.total_payouts }}</div>
    </div>

    <div style="background: #000; padding: 15px 20px; color:white; border-left: 6px solid #e60000; flex:1; border-radius: 6px;">
        <div style="font-size:14px; opacity:.8;">Current Balance</div>
        <div style="font-size:26px; font-weight:bold;">${{ stats.balance }}</div>
    </div>

</div>
  {% if items %}
  <h2 style="margin-top: 30px; font-size: 22px;">Recent Items</h2>

  <table border="0" cellpadding="6" cellspacing="0" style="width:100%; border-collapse:collapse; margin-top:10px;">
    <thead>
      <tr style="background:#000; color:#fff;">
        <th align="left">ID</th>
        <th align="left">Title</th>
        <th align="left">SKU</th>
        <th align="left">Status</th>
        <th align="left">Created</th>
        <th align="right">Sale Price</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr style="background: {{ loop.index0 % 2 == 0 and '#111' or '#1a1a1a' }}; color:#eee;">
        <td>#{{ item.id }}</td>
        <td>
          {{ item.title or item.name or ('Item #' ~ item.id) }}
        </td>
        <td>{{ item.sku or '' }}</td>
        <td>
          {% if item.sale_price_cents %}
            <span style="background:#064f25; color:#fff; padding:2px 6px; border-radius:10px; font-size:11px;">
              Sold
            </span>
          {% else %}
            <span style="background:#444; color:#fff; padding:2px 6px; border-radius:10px; font-size:11px;">
              Active / Unsold
            </span>
          {% endif %}
        </td>
        <td>
          {{ item.created_at.strftime("%Y-%m-%d") if item.created_at else "" }}
        </td>
        <td align="right">
          {% if item.sale_price_cents %}
            ${{ '%.2f'|(item.sale_price_cents / 100.0) }}
          {% else %}
            â€”
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p style="margin-top: 30px; color:#aaa;">
    No items found for this consignor yet.
  </p>
  {% endif %}

<p><strong>Email:</strong> {{ consignor.email }}</p>
<p><strong>Phone:</strong> {{ consignor.phone }}</p>
<p><strong>Commission %:</strong> {{ consignor.commission_pct }}</p>
<p><strong>Advance Balance:</strong> {{ consignor.advance_balance }}</p>

<a href="/consignors" class="btn btn-dark" style="margin-top:20px;">Back to Consignors</a>

{% endblock %}
