{% extends "base.html" %}

{% block title %}Consignment Contract – {{ consignor.name }}{% endblock %}

{% block content %}
<div style="max-width:900px;margin:20px auto;background:#fff;padding:20px 24px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.08);">
  <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:16px;margin-bottom:16px;">
    <div>
      <h1 style="margin:0 0 8px;font-size:24px;">FlashBidz Consignment Agreement</h1>
      <div style="font-size:14px;color:#555;">
        <div><strong>Consignor:</strong> {{ consignor.name }}</div>
        {% if consignor.email %}<div><strong>Email:</strong> {{ consignor.email }}</div>{% endif %}
        {% if consignor.phone %}<div><strong>Phone:</strong> {{ consignor.phone }}</div>{% endif %}
      </div>
    </div>
    <div style="text-align:right;font-size:13px;color:#555;">
      <div><strong>Contract ID:</strong> {{ contract.id }}</div>
      <div><strong>Created:</strong> {{ contract.created_at }}</div>
      <div><strong>Status:</strong> {{ contract.status|capitalize }}</div>
    </div>
  </div>

  <!-- LEGAL TERMS -->
  <section style="font-size:13px;line-height:1.5;margin-bottom:18px;border:1px solid #ddd;padding:12px 14px;border-radius:6px;">
    <h2 style="margin:0 0 8px;font-size:16px;">Consignment Terms &amp; Conditions</h2>

    <ol style="padding-left:16px;margin:0;">
      <li><strong>Agency:</strong> Consignor authorizes FlashBidz (“Company”) to act as selling agent for the items listed in this contract in-store, online, or through other sales channels at Company’s discretion.</li>

      <li><strong>Ownership &amp; Title:</strong> Consignor warrants that they are the lawful owner of all items consigned, free and clear of liens or other claims, and that they have full authority to consign and sell these items.</li>

      <li><strong>Pricing &amp; Discounts:</strong> Unless otherwise noted in writing, Company may reasonably price, group, lot, and discount items in order to promote sale, including price reductions, multi-item lots, or promotional discounts.</li>

      <li><strong>Commission &amp; Fees:</strong> Consignor agrees that Company will retain a commission from the gross selling price of each item at the rate shown in Company records for this consignor (or as otherwise agreed in writing). Payment processing fees, marketplace fees, and other direct selling costs may be deducted before calculating consignor payout.</li>

      <li><strong>As-Is Condition:</strong> All items are sold “AS-IS, WHERE-IS” with no warranties expressed or implied. Company is not responsible for manufacturer defects, hidden damage, or issues discovered after sale.</li>

      <li><strong>Loss, Theft, or Damage:</strong> Company will use reasonable care in handling and storing items but is not an insurer. Consignor agrees that Company is not liable for ordinary loss, theft, fire, water damage, or accidental breakage, except in cases of gross negligence or intentional misconduct.</li>

      <li><strong>Term of Consignment:</strong> Unless otherwise agreed in writing, items will be offered for sale for a reasonable period determined by Company. Company may remove items from active sale at any time if they become unsafe, unsellable, or inappropriate for the venue.</li>

      <li><strong>Unsold Items:</strong> Consignor is responsible for picking up unsold items within the timeframe communicated by Company. If items are not picked up after notice is given, Company may, at its discretion, discount, donate, dispose of, or otherwise liquidate such items with no further obligation to Consignor.</li>

      <li><strong>Payment to Consignor:</strong> Net proceeds (after commission and applicable fees) will be calculated and paid according to Company’s regular payout schedule. Consignor is responsible for providing accurate mailing or electronic payment information and for any taxes due on amounts received.</li>

      <li><strong>Records &amp; Statements:</strong> Company will maintain reasonable records of items sold and payouts issued. Consignor may request a statement showing items sold, sale prices, and net amounts due.</li>

      <li><strong>Disputes:</strong> Any disputes regarding condition, pricing, or payouts must be raised in writing within 10 business days of receiving a statement or payment. After that period, Company’s records will be deemed accurate.</li>

      <li><strong>Governing Law:</strong> This Agreement is governed by the laws of the State of Michigan. Any legal action shall be brought in a court of competent jurisdiction in that state and county where Company is located.</li>
    </ol>

    <p style="margin-top:8px;font-size:12px;color:#777;">
      This consignment agreement, together with any signed addenda or intake forms, represents the entire agreement between the parties regarding the items listed below.
      Consignor acknowledges that they have read, understand, and agree to these terms.
    </p>
  </section>

  <!-- ITEM LIST -->
  <section style="margin-bottom:18px;">
    <h2 style="font-size:16px;margin:0 0 8px;">Items on this Contract</h2>

    <table style="width:100%;border-collapse:collapse;font-size:13px;">
      <thead>
        <tr style="background:#f5f5f5;">
          <th style="border:1px solid #ddd;padding:4px 6px;">SKU</th>
          <th style="border:1px solid #ddd;padding:4px 6px;">Title</th>
          <th style="border:1px solid #ddd;padding:4px 6px;">Category</th>
          <th style="border:1px solid #ddd;padding:4px 6px;text-align:right;">Asking</th>
          <th style="border:1px solid #ddd;padding:4px 6px;text-align:right;">Sale Price</th>
        </tr>
      </thead>
      <tbody>
        {% for it in items %}
          <tr>
            <td style="border:1px solid #ddd;padding:4px 6px;">{{ it.sku }}</td>
            <td style="border:1px solid #ddd;padding:4px 6px;">{{ it.title }}</td>
            <td style="border:1px solid #ddd;padding:4px 6px;">{{ it.category or "" }}</td>
            <td style="border:1px solid #ddd;padding:4px 6px;text-align:right;">
              {% if it.asking_cents is not none %}${{ (it.asking_cents / 100.0) | round(2) }}{% endif %}
            </td>
            <td style="border:1px solid #ddd;padding:4px 6px;text-align:right;">
              {% if it.sale_price_cents is not none %}${{ (it.sale_price_cents / 100.0) | round(2) }}{% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <div style="margin-top:8px;font-size:13px;">
      <strong>Total items:</strong> {{ total_items }}<br>
      <strong>Total asking (est.):</strong> ${{ "%.2f"|format(total_estimated or 0) }}<br>
      <strong>Total recorded sales:</strong> ${{ "%.2f"|format(total_sale_estimate or 0) }}
    </div>
  </section>

  <!-- SIGNATURE BLOCK -->
  <section style="margin-top:16px;font-size:13px;">
    <p>
      By signing below, Consignor agrees to the terms of this Consignment Agreement and confirms that the items listed above are owned by them and may be sold by FlashBidz under these terms.
    </p>

    <div style="margin-top:24px;display:flex;gap:40px;">
      <div style="flex:1;">
        <div style="border-bottom:1px solid #000;height:24px;"></div>
        <div style="font-size:12px;margin-top:4px;">Consignor Signature &amp; Date</div>
      </div>
      <div style="flex:1;">
        <div style="border-bottom:1px solid #000;height:24px;"></div>
        <div style="font-size:12px;margin-top:4px;">FlashBidz Representative &amp; Date</div>
      </div>
    </div>
  </section>

  <div style="margin-top:20px;text-align:right;">
    <button onclick="window.print()" style="padding:6px 12px;border:1px solid #111;background:#111;color:#fff;border-radius:4px;cursor:pointer;">
      Print Contract
    </button>
  </div>
</div>

<p style="text-align:center;margin-top:10px;font-size:12px;color:#777;">
  <em>This template is for general business use and is not legal advice. Please have your attorney review before relying on it.</em>
</p>
{% endblock %}
